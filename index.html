<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Premium OTT</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <!-- Global loading overlay -->
  <div id="globalLoader">
    <div class="loader-ring"></div>
    <div class="loader-text">Loading experience…</div>
  </div>

  <!-- Header with live player -->
  <header class="app-header">
    <div class="brand">
      <div class="logo-dot"></div>
      <span class="brand-text">Premium OTT</span>
    </div>

    <div class="actions">
      <button id="themeToggle" class="btn ghost">Theme: Red/Blue</button>
      <button id="refreshBtn" class="btn ghost">Refresh</button>
    </div>
  </header>

  <!-- Live stream strip (appears after clicking a poster) -->
  <section class="live-strip" id="liveStrip">
    <div class="live-meta">
      <div class="live-indicator">
        <span class="dot"></span><span>Live Stream</span>
      </div>
      <div class="fake-stats">
        <span id="viewersCount">—</span> watching now • <span id="bitrate">—</span> kbps
      </div>
    </div>

    <div class="player">
      <!-- We use iframe for stream link. You’ll set the URL via JSON. -->
      <iframe id="livePlayer" src="" title="Live Stream" loading="lazy" allowfullscreen referrerpolicy="no-referrer"></iframe>
    </div>

    <!-- 3-step gated section (appears with the player) -->
    <div class="gate-section">
      <h3 class="gate-title">Download link for this movie</h3>
      <p class="gate-subtitle">Complete all three steps to reveal the final link.</p>

      <div class="steps">
        <button class="btn step" data-step="1">Step 1</button>
        <button class="btn step" data-step="2" disabled>Step 2</button>
        <button class="btn step" data-step="3" disabled>Step 3</button>
      </div>

      <div class="final-link hidden" id="finalLinkWrap">
        <a id="finalLink" class="btn primary" href="#" target="_blank" rel="noopener">Get Final Download Link</a>
      </div>
    </div>
  </section>

  <!-- Main grid: 2-2 layout, responsive -->
  <main class="content">
    <div class="toolbar">
      <div class="toolbar-left">
        <div class="toggle-group">
          <button class="btn toggle active" data-grid="2">Grid 2</button>
          <button class="btn toggle" data-grid="3">Grid 3</button>
          <button class="btn toggle" data-grid="4">Grid 4</button>
        </div>
      </div>
      <div class="toolbar-right">
        <div class="search">
          <input id="searchInput" type="text" placeholder="Search posters by URL fragment (no titles used)" />
        </div>
      </div>
    </div>

    <section class="movie-grid" id="movieGrid">
      <!-- Cards injected by script.js from movies.json -->
    </section>
  </main>

  <!-- Popup with 30s timer + 250x250 ad -->
  <div class="popup-backdrop hidden" id="popupBackdrop" aria-hidden="true">
    <div class="popup">
      <button class="popup-close" id="popupClose" aria-label="Close popup">×</button>
      <div class="popup-body">
        <div class="ad-wrap">
          <img src="assets/ad-250x250.jpg" alt="Ad 250x250" width="250" height="250" />
        </div>
        <div class="popup-info">
          <h4>Please wait 30 seconds</h4>
          <p>Complete this step to proceed. The popup will close automatically.</p>
          <div class="timer">
            <div class="timer-ring">
              <svg viewBox="0 0 36 36">
                <path class="bg" d="M18 2.0845
                  a 15.9155 15.9155 0 0 1 0 31.831
                  a 15.9155 15.9155 0 0 1 0 -31.831" />
                <path class="progress" id="timerProgress" d="M18 2.0845
                  a 15.9155 15.9155 0 0 1 0 31.831
                  a 15.9155 15.9155 0 0 1 0 -31.831" />
              </svg>
            </div>
            <div class="timer-count">
              <span id="timerCount">30</span>s
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <footer class="app-footer">
    <div class="foot-left">© Premium OTT — cinematic UI • responsive • JSON-driven</div>
    <div class="foot-right">Made with care for Bhawani</div>
  </footer>

  <script src="script.js"></script>
</body>
</html>
